# Знакомство с языком Python (семинары)

## Урок 8. Работа с файлами
``` py
Дополнить справочник возможностью копирования данных из одного файла в другой. 
Пользователь вводит номер строки, которую необходимо перенести из одного файла в другой.
```
В функцию main() добавляем новую команду, которая сработает, если пользователь введёт символ
"c". Затем получаем данные от пользователя - название файла назначения, в который должны
скопироваться строки из текущего файла, название которого мы так же передаём в вызов функции
copyData(). У нас файл не меняется, поэтому значением по умолчанию будет 'phones.csv'.

Так же пользователь вводит номер строки, который мы принудительно преобразуем в целочисленный
тип.

```py
elif command == 'c':
    # Получаем от пользователя названия файлов и номер строки
    destinationFileName = input("Введите название файла-назначения: ")
    rowToCopy = int(input("Введите номер строки для копирования: "))

    # Вызываем функцию для копирования данных
    copyData('phones.csv', destinationFileName, rowToCopy)
```
Происходит вызов функции copyData, в которую передаются аргументы - название текущего файла, 
название нового файла и номер строки

```py
def copyData(source_filename, destination_filename, row_number):
    # Проверяем, существует ли файл-источник
    if not path.exists(source_filename):
        print("Файл-источник не существует.")
        return

    # Открываем файл-источник для чтения
    with open(source_filename, 'r', encoding='utf-8', newline='') as source_file:
        csv_reader = reader(source_file)
        data = list(csv_reader)

        # Проверяем, есть ли строка с указанным номером
        if row_number <= 0 or row_number > len(data):
            print("Указан неверный номер строки.")
            return

        # Выводим содержимое строки для проверки
        print(f"Содержимое строки {row_number}:")
        print(data[row_number - 1])

        # Пользовательский выбор для копирования данных
        choice = input("Хотите скопировать данные (Y/N)? ").strip().upper()

        if choice == 'Y':
            # Открываем файл-назначение для записи
            mode = 'a' if path.exists(destination_filename) else 'w'
            with open(destination_filename, mode, newline='', encoding='utf-8') as dest_file:
                csv_writer = writer(dest_file)
                # Копируем строку в файл-назначение
                csv_writer.writerow(data[row_number - 1])
                print("Данные успешно скопированы.")
        else:
            print("Данные не были скопированы.")
```
Сначала функция проверяет существует ли источник, в нашем случае 'phones.csv'.
Если не существует, то пользователь увидит ошибку "Файл-источник не существует."
Если файл существует, то открываем его в режиме для чтения.

Проверяем, существует ли в файле строка, номер которой указал пользователь.
Если она не существует, то пользователь получит ошибку "Указан неверный номер строки.".

Если строка существует, то выведем её значение в консоль, чтобы пользователь убедился,
что именно эти данные он хочет скопировать. Выбор принимается вводом в консоль Y - Yes
или N - No. В целом, происходит проверка только на Y, на любой другой ввод пользователь
получит сообщение "Данные не были скопированы.", и данные записаны не будут.

Последним действием производится запись в файл, при этом, если файл небыл создан, то 
скрипт автоматически его создает и копирует в него строку.

Если файл был создан, то данные просто добавятся в конец документа. 